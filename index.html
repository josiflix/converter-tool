<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- VERIFICACIÓN GOOGLE SEARCH CONSOLE -->
    <meta name="google-site-verification" content="LkKW7oW0bGQtaSS5NndaEO_CVDqUAhx1czdIqlNtyvY" />
    
    <!-- SEO PRINCIPAL -->
    <title>Aether Convert | Free WebP to JPG & PNG Converter Tool</title>
    <meta name="description" content="Convert WebP images to high-quality JPG or PNG instantly. Secure client-side processing, batch conversion, and unlimited speed. No server uploads required.">
    <meta name="keywords" content="webp to jpg, webp to png, image converter, free image converter, bulk webp converter, client-side converter, aether tools">
    <meta name="author" content="Aether Suite">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://tusitio.com/converter/">

    <!-- OPEN GRAPH -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tusitio.com/converter/">
    <meta property="og:title" content="Aether Convert | Professional WebP Processor">
    <meta property="og:description" content="The fastest way to convert WebP to JPG/PNG. Secure, private, and browser-based. Try it for free.">
    <meta property="og:image" content="https://tusitio.com/assets/og-image.jpg">

    <!-- DATOS ESTRUCTURADOS -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Aether Convert",
      "applicationCategory": "MultimediaApplication",
      "operatingSystem": "Web Browser",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "EUR",
        "description": "Free version available with batch limits. Pro version available for 1.99 EUR."
      },
      "description": "Professional WebP to JPG and PNG converter running entirely in the browser for maximum privacy and speed.",
      "featureList": "WebP conversion, JPG compression, Batch processing, Client-side privacy",
      "softwareRequirements": "Modern Web Browser"
    }
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- LEMON SQUEEZY -->
    <script src="https://app.lemonsqueezy.com/js/lemon.js" defer></script>

    <style>
        :root { --bg: #050505; --panel: #121212; --border: rgba(255,255,255,0.08); }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg); color: #fff; }
        
        .glass-panel { background: rgba(20,20,20,0.6); backdrop-filter: blur(20px); border: 1px solid var(--border); }
        .btn-primary { background: #fff; color: #000; transition: all 0.3s; }
        .btn-primary:hover { background: #e5e5e5; transform: translateY(-1px); }
        
        /* Dropzone */
        .drop-zone {
            border: 1px dashed rgba(255,255,255,0.1);
            background: linear-gradient(180deg, rgba(255,255,255,0.02) 0%, rgba(0,0,0,0) 100%);
            transition: all 0.3s ease;
        }
        .drop-zone.dragover { border-color: #fff; background: rgba(255,255,255,0.05); }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
    </style>
</head>
<body class="h-screen flex flex-col overflow-hidden selection:bg-white selection:text-black">

    <!-- HEADER LIMPIO -->
    <header class="h-14 border-b border-white/5 bg-[#080808] flex items-center justify-between px-6 shrink-0 z-20">
        <div class="flex items-center gap-3">
            <h1 class="font-medium text-sm tracking-widest uppercase text-white">
                AETHER <span class="text-gray-600">/</span> WEBP CONVERTER
            </h1>
        </div>
        <div class="flex items-center gap-3">
            <span id="proBadge" class="hidden text-[9px] bg-white text-black px-2 py-0.5 rounded font-bold tracking-wide uppercase">PRO LICENSE</span>
            <span id="planStatus" class="text-[10px] text-gray-500">Free Plan (3 Files Max)</span>
        </div>
    </header>

    <main class="flex-1 flex overflow-hidden">
        <!-- SIDEBAR -->
        <aside class="w-72 bg-[#0a0a0a] border-r border-white/5 flex flex-col shrink-0 z-10" aria-label="Configuration Panel">
            <div class="p-6 space-y-8">
                <div>
                    <label class="text-[10px] font-bold text-gray-500 uppercase tracking-wider mb-3 block">Output Format</label>
                    <div class="grid grid-cols-2 gap-2 p-1 bg-white/5 rounded-lg">
                        <button onclick="setFormat('jpeg')" id="btnJpg" class="py-1.5 rounded text-xs font-medium transition-all bg-white text-black">JPG</button>
                        <button onclick="setFormat('png')" id="btnPng" class="py-1.5 rounded text-xs font-medium transition-all text-gray-400 hover:text-white">PNG</button>
                    </div>
                    <p class="text-[10px] text-gray-600 mt-2 ml-1" id="formatDesc">Best for photos. Optimized JPG compression.</p>
                </div>
                <div id="qualityControl" class="space-y-3">
                    <div class="flex justify-between items-end">
                        <label class="text-[10px] font-bold text-gray-500 uppercase">Quality</label>
                        <span id="qualityVal" class="text-xs font-mono text-white">90%</span>
                    </div>
                    <input type="range" id="quality" min="10" max="100" value="90" class="w-full h-1 bg-gray-800 rounded-lg appearance-none cursor-pointer accent-white">
                </div>
                <div class="pt-6 border-t border-white/5 mt-auto">
                    <button onclick="downloadAll()" id="btnDownloadAll" disabled class="w-full py-3 btn-primary rounded-lg font-medium text-sm flex justify-center items-center gap-2 disabled:opacity-30 disabled:cursor-not-allowed">
                        Download All
                    </button>
                    <button onclick="clearList()" class="mt-3 w-full py-2 text-[10px] text-gray-600 hover:text-red-400 transition-colors uppercase tracking-wider">
                        Clear Queue
                    </button>
                </div>
            </div>
        </aside>

        <!-- WORKSPACE -->
        <section class="flex-1 bg-black relative flex flex-col p-6 overflow-hidden">
            <div id="dropZone" class="drop-zone flex-1 rounded-2xl flex flex-col items-center justify-center text-center cursor-pointer relative overflow-hidden group" onclick="document.getElementById('fileInput').click()">
                <input type="file" id="fileInput" multiple accept="image/*" class="hidden" onchange="handleFiles(this.files)">
                
                <div id="emptyState" class="pointer-events-none transition-opacity duration-500">
                    <i class="fa-solid fa-plus text-4xl text-white/10 mb-4 group-hover:text-white/30 transition-colors"></i>
                    <h2 class="text-lg font-medium text-white/80 mb-1">Convert WebP to JPG</h2>
                    <p class="text-sm text-gray-500 font-light">Drag & drop files here. Fast, private, secure.</p>
                </div>

                <div id="fileGrid" class="absolute inset-0 p-6 overflow-y-auto grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 content-start hidden"></div>
            </div>
            <div class="mt-3 flex justify-between items-center text-[10px] text-gray-700 font-mono uppercase">
                <span id="statusCount">Ready</span>
                <span title="Privacy focused: Images never leave your device">Local Browser Processing</span>
            </div>
        </section>
    </main>

    <!-- PAYWALL MODAL -->
    <div id="paywallModal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4 backdrop-blur-xl bg-black/60">
        <div class="bg-[#121212] border border-white/10 rounded-2xl shadow-2xl max-w-sm w-full p-8 text-center relative animate-fade-in-up">
            <div class="w-12 h-12 rounded-full bg-white/5 flex items-center justify-center mx-auto mb-6 border border-white/10">
                <i class="fa-solid fa-lock text-white"></i>
            </div>
            <h2 class="text-xl font-medium text-white mb-2">Unlock Unlimited Batch</h2>
            <p class="text-gray-500 text-sm mb-8 font-light">Free tier is limited to 3 concurrent conversions. Upgrade to Aether Pro for unlimited batch processing.</p>
            
            <!-- ENLACE DE PAGO LEMON SQUEEZY -->
            <a id="lemonSqueezyLink" href="#" class="lemonsqueezy-button w-full py-3 bg-white text-black font-medium rounded-lg hover:bg-gray-200 transition-colors block mb-3">
                Upgrade to Pro - 1,99 €
            </a>
            
            <button onclick="closeModal()" class="text-xs text-gray-600 hover:text-white transition-colors">Cancel</button>
        </div>
    </div>

    <!-- JSZIP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script>
        // CONFIGURACIÓN DE PAGO (Kroma)
        const LEMON_CHECKOUT_URL = 'https://kroma.lemonsqueezy.com/buy/b8364fe0-6809-4226-a9d8-83c65712e8fa'; 

        let isPremium = localStorage.getItem('aether_pro_status') === 'true';
        let currentFormat = 'jpeg';
        let currentQuality = 0.9;
        let filesData = [];
        const FREE_LIMIT = 3;

        // INIT
        checkProStatus();
        document.getElementById('lemonSqueezyLink').href = LEMON_CHECKOUT_URL + '?embed=1';
        
        document.getElementById('quality').addEventListener('input', (e) => {
            currentQuality = e.target.value / 100;
            document.getElementById('qualityVal').innerText = e.target.value + '%';
        });

        function setFormat(fmt) {
            currentFormat = fmt;
            document.getElementById('btnJpg').className = fmt === 'jpeg' ? "py-1.5 rounded text-xs font-medium transition-all bg-white text-black" : "py-1.5 rounded text-xs font-medium transition-all text-gray-400 hover:text-white";
            document.getElementById('btnPng').className = fmt === 'png' ? "py-1.5 rounded text-xs font-medium transition-all bg-white text-black" : "py-1.5 rounded text-xs font-medium transition-all text-gray-400 hover:text-white";
            document.getElementById('qualityControl').style.opacity = fmt === 'png' ? '0.3' : '1';
            
            const desc = document.getElementById('formatDesc');
            if(fmt === 'jpeg') desc.innerText = "Best for photos. Optimized JPG compression.";
            else desc.innerText = "Best for graphics. Preserves transparency.";
        }

        // DRAG & DROP
        const dz = document.getElementById('dropZone');
        dz.addEventListener('dragover', e => { e.preventDefault(); dz.classList.add('dragover'); });
        dz.addEventListener('dragleave', e => { e.preventDefault(); dz.classList.remove('dragover'); });
        dz.addEventListener('drop', e => { e.preventDefault(); dz.classList.remove('dragover'); if(e.dataTransfer.files.length) handleFiles(e.dataTransfer.files); });

        function handleFiles(files) {
            if (!isPremium && (filesData.length + files.length) > FREE_LIMIT) { showPaywall(); return; }
            document.getElementById('emptyState').classList.add('hidden');
            document.getElementById('fileGrid').classList.remove('hidden');
            Array.from(files).forEach(f => {
                if(!f.type.startsWith('image/')) return;
                const id = Math.random().toString(36).substr(2,9);
                const obj = { id, name: f.name, file: f, blob: null, url: null };
                filesData.push(obj);
                renderCard(obj);
                processImage(obj);
            });
            updateUI();
        }

        function renderCard(item) {
            const div = document.createElement('div');
            div.id = `card-${item.id}`;
            div.className = "bg-[#121212] border border-white/5 rounded-lg overflow-hidden relative h-32 group";
            div.innerHTML = `
                <div class="w-full h-full flex items-center justify-center p-2"><img id="img-${item.id}" class="max-h-full max-w-full opacity-30 grayscale transition-all" alt="Preview"></div>
                <div class="absolute top-2 right-2"><button onclick="removeFile('${item.id}')" class="text-white/20 hover:text-red-500"><i class="fa-solid fa-xmark"></i></button></div>
                <div class="absolute bottom-0 w-full bg-black/80 p-2 flex justify-between items-center text-[9px] text-gray-400 backdrop-blur-sm translate-y-full group-hover:translate-y-0 transition-transform">
                    <span class="truncate max-w-[80px]">${item.name}</span>
                    <button onclick="downloadSingle('${item.id}')" class="text-white hover:text-blue-400"><i class="fa-solid fa-download"></i></button>
                </div>
            `;
            document.getElementById('fileGrid').appendChild(div);
        }

        function processImage(item) {
            const r = new FileReader();
            r.onload = e => {
                const img = new Image();
                img.onload = () => {
                    document.getElementById(`img-${item.id}`).src = e.target.result;
                    const c = document.createElement('canvas');
                    c.width = img.width; c.height = img.height;
                    const ctx = c.getContext('2d');
                    if(currentFormat==='jpeg'){ ctx.fillStyle='#FFF'; ctx.fillRect(0,0,c.width,c.height); }
                    ctx.drawImage(img,0,0);
                    c.toBlob(b => {
                        item.blob = b;
                        item.url = URL.createObjectURL(b);
                        document.getElementById(`img-${item.id}`).classList.remove('opacity-30', 'grayscale');
                        updateUI();
                    }, currentFormat==='jpeg'?'image/jpeg':'image/png', currentFormat==='jpeg'?currentQuality:1);
                };
                img.src = e.target.result;
            };
            r.readAsDataURL(item.file);
        }

        // UTILS
        function showPaywall() { document.getElementById('paywallModal').classList.remove('hidden'); }
        function closeModal() { document.getElementById('paywallModal').classList.add('hidden'); }
        function checkProStatus() {
            if(isPremium) {
                document.getElementById('proBadge').classList.remove('hidden');
                document.getElementById('planStatus').innerText = "Unlimited Plan";
            }
        }
        window.createLemonSqueezy();
        LemonSqueezy.Setup({ eventHandler: (e) => { if(e.event === 'OrderCreated') { isPremium=true; localStorage.setItem('aether_pro_status','true'); checkProStatus(); closeModal(); } } });

        function downloadSingle(id) {
            const f = filesData.find(x=>x.id===id);
            if(f && f.url) {
                const a = document.createElement('a');
                a.href = f.url; 
                a.download = f.name.split('.')[0] + `_aether.${currentFormat}`;
                a.click();
            }
        }

        async function downloadAll() {
            const valid = filesData.filter(x=>x.blob);
            if(valid.length === 0) return;
            if(valid.length <= 2) { valid.forEach((f, i) => setTimeout(() => downloadSingle(f.id), i * 300)); return; }

            const zip = new JSZip();
            const ext = currentFormat === 'jpeg' ? 'jpg' : 'png';
            const btn = document.getElementById('btnDownloadAll');
            const old = btn.innerHTML;
            btn.innerHTML = 'Compressing...';
            valid.forEach(f => zip.file(f.name.split('.')[0] + `.${ext}`, f.blob));
            const c = await zip.generateAsync({type:"blob"});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(c);
            a.download = "aether_batch.zip";
            a.click();
            btn.innerHTML = old;
        }

        function removeFile(id) {
            filesData = filesData.filter(x=>x.id!==id);
            document.getElementById(`card-${id}`).remove();
            updateUI();
            if(filesData.length===0) clearList();
        }
        function clearList() {
            filesData=[];
            document.getElementById('fileGrid').innerHTML='';
            document.getElementById('fileGrid').classList.add('hidden');
            document.getElementById('emptyState').classList.remove('hidden');
            updateUI();
        }
        function updateUI() {
            const count = filesData.length;
            const done = filesData.filter(x=>x.blob).length;
            document.getElementById('statusCount').innerText = count > 0 ? `${done}/${count} processed` : 'Ready';
            document.getElementById('btnDownloadAll').disabled = done === 0;
            if(done>0) document.getElementById('btnDownloadAll').classList.remove('opacity-30', 'cursor-not-allowed');
        }
    </script>
</body>
</html>
